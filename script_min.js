"use strict";var terminal=document.getElementById("console"),letterCount=0,letterDelete=0,visible=!0,expandedText=!1,helloWorld="hello world",nameString="Nikhi Bhambra",blogString="blog",aboutString="about",currentMode="home";let mainCopy=document.getElementById("main-copy").innerHTML;function terminalText(e){let t=document.getElementById("text");window.setTimeout(function(){window.setTimeout(function(){if(0===letterCount)for(;letterCount<=e.length;)!function(n){window.setTimeout(function(){1===n&&(terminal.innerHTML="&#95;"),t.innerHTML=e.substring(0,n)},100*n)}(letterCount++)},0),window.setTimeout(function(){if(letterCount>=e.length&&e!=nameString)for(;letterCount>=0&&letterDelete!=e.length+1;)!function(n){window.setTimeout(function(){n<1&&(terminal.innerHTML="&nbsp;&#95;"),t.innerHTML=e.substring(0,n)},1e3-40*n)}(letterDelete++)},2e3),letterCount=0,letterDelete=0},1500)}function blinkingCursor(){visible?(terminal.className="console-underscore hidden",visible=!1):(terminal.className="console-underscore",visible=!0)}function tintBackgroundTo(e){document.documentElement.style.background="#"+e}function startBackgroundAnimation(){window.addEventListener("load",function(){let e,t,n,o,i,r,l,s,a,d,c,u,m,$=Math.random,h=Math.floor,g=Math.abs;function y(e,t){return void 0===t?e*$():e+$()*(t-e)}function p(e,t){return void 0===t?h(e*$()):e+h($()*(t-e))}function f(e){return e[p(0,e.length)]}function k(e){let t,n;for(let o=e.length-1;o>=1;--o)t=p(0,o+1),n=e[o],e[o]=e[t],e[t]=n;return e}function b(e,t,r){this.color=r||`hsl(${p(360)},100%,50%)`,this.kx=e,this.ky=t,this.kxc=e-d,this.kyc=t-c,this.xc=n/2+this.kxc*i,this.yc=o/2+this.kyc*i}function v(e){let t=e.hue,n=e.dhue,o=e.lum,i=e.dlum,r=e.width,l=e.dWidth,s;switch(m){case 0:s=`hsl(${t},100%,50%)`,t=(t+n)%360;break;case 1:s=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-g(i)),o<40&&(i=g(i));break;case 2:s=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-g(i)),o<40&&(i=g(i)),t=(t+n)%360}return(r+=l)>2.5&&(l=-g(l)),r<.5&&(l=g(l)),{hue:t,dhue:n,lum:o,dlum:i,width:r,dWidth:l,color:s}}b.prototype.fillSquare=function(e){let n=i-.5,o=n/2;this.evolColor=e,t.fillStyle=`hsl(${e.hue}, 100%,${e.lum}% )`,t.fillRect(this.xc-o,this.yc-o,n,n)};let E;{let x=0,B,_,T;E=function(e){let t,n,o;(n=u.pop())&&"reset"==n.event&&(x=0),n&&"click"==n.event&&(x=0),window.requestAnimationFrame(E),t=performance.now();do switch(x){case 0:I()&&(++x,(T={}).hue=p(360),T.dhue=p(2)?1:359,T.lum=p(40,80),T.dlum=p(2)?-1:1,T.width=y(.5,2.5),T.dWidth=.1,T=v(T));break;case 1:B=[_=l[c][d]],++x;case 2:if(0==B.length){x+=10;break}if((_=B.shift()).evolColor)break;++x;case 3:if(T=v(T),_.group.forEach(e=>e.fillSquare(T)),o=new Set,_.group.forEach(e=>{e.neighbours.forEach(e=>{e.evolColor||o.add(e.group)})}),0==o.size){--x;break}o=k([...o]);for(let i=1;i<o.length;++i)B.push([...o[i]][0]);_=[...o[0]][0]}while((2==x||3==x)&&performance.now()-t<.01)}}function w(e,t,n){t<0||n<0||t>=s||n>=a||(e.add(l[n][t]),l[n][t].group=e)}function v(e){let t=e.hue,n=e.dhue,o=e.lum,i=e.dlum,r=e.width,l=e.dWidth,s;switch(m){case 0:s=`hsl(${t},100%,50%)`,t=(t+n)%360,o=50;break;case 1:s=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-g(i)),o<40&&(i=g(i));break;case 2:s=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-g(i)),o<40&&(i=g(i)),t=(t+n)%360}return(r+=l)>2.5&&(l=-g(l)),r<.5&&(l=g(l)),{hue:t,dhue:n,lum:o,dlum:i,width:r,dWidth:l,color:s}}function I(){return n=window.innerWidth,o=window.innerHeight,e.width=n,e.height=o,t.lineJoin="bevel",t.lineCap="round",r=(i=y(5,10))/2,c=h(o/i/2),s=1+2*(d=h(n/i/2)),a=1+2*c,!(s<3)&&!(a<3)&&(t.clearRect(0,0,n,o),m=p(3),function e(){let t,n,o;l=[];for(let i=0;i<a;++i){l[i]=[];for(let r=0;r<s;++r)l[i][r]=new b(r,i)}for(let u=0;u<a;++u)for(let m=0;m<s;++m)(o=l[u][m]).neighbours=[],(n=u-1)>=0&&(o.neighbours[0]=l[n][m]),(t=m+1)<s&&(o.neighbours[1]=l[u][t]),(n=u+1)<a&&(o.neighbours[2]=l[n][m]),(t=m-1)>=0&&(o.neighbours[3]=l[u][t]);for(let $=0;$<a;++$)for(let h=0;h<s;++h)(o=l[$][h]).group||(o.group=new Set([o]),w(o.group,d-o.kxc,o.ky),w(o.group,o.kx,c-o.kyc),w(o.group,d-o.kxc,c-o.kyc),w(o.group,d+o.kyc,c+o.kxc),w(o.group,d+o.kyc,c-o.kxc),w(o.group,d-o.kyc,c+o.kxc),w(o.group,d-o.kyc,c-o.kxc))}(),!0)}(e=document.createElement("canvas")).style.position="absolute",e.style.zIndex="-1",e.style.opacity=.18,e.style.transition="opacity 1s",document.documentElement.appendChild(e),t=e.getContext("2d"),e.setAttribute("title","click me"),e.addEventListener("click",function e(t){u.push({event:"click"})}),u=[{event:"reset"}],requestAnimationFrame(E)})}function stopBackgroundAnimation(){console.log()}function seeBackground(){document.getElementsByTagName("canvas")[0].style.opacity=1,document.getElementById("top-part").classList.add("hidden"),document.getElementById("main-copy").classList.add("hidden"),document.getElementById("socials").classList.add("hidden")}function undoSeeBackground(){document.getElementsByTagName("canvas")[0].style.opacity=.18,document.getElementById("top-part").classList.remove("hidden"),document.getElementById("main-copy").classList.remove("hidden"),document.getElementById("socials").classList.remove("hidden")}function translucentMode(){document.body.classList.add("transparent-surface")}function undoTranslucentMode(){document.body.classList.remove("transparent-surface")}function showDate(e){document.getElementsByTagName("ul")[0].childNodes[e].childNodes[1].style.opacity=1}function hideDate(e){document.getElementsByTagName("ul")[0].childNodes[e].childNodes[1].style.opacity=0}function turnOnNarration(){!document.body.getElementsByClassName("audio").length>0&&(document.body.innerHTML+="<audio id='audio-player' preload='auto' src='/media/about_narration.mp3'></audio>");document.getElementById("audio-player").play();let e=document.getElementById("button");e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-stop-circle'><circle cx='12' cy='12' r='10'></circle><rect x='10' y='10' width='4' height='4' fill='currentColor'></rect></svg>",e.removeEventListener("click",()=>{turnOnNarration()}),e.addEventListener("click",()=>{turnOffNarration()}),document.getElementById("options-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"})}function turnOffNarration(){let e=document.getElementById("button");document.getElementById("audio-player").pause(),e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-play-circle'><circle cx='12' cy='12' r='10'></circle><polygon points='10 8 16 12 10 16 10 8'></polygon></svg>",e.removeEventListener("click",()=>{turnOffNarration()}),e.addEventListener("click",()=>{turnOnNarration()}),document.getElementById("options-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"})}function playXylophoneSound(e){!document.body.getElementsByClassName("audio").length>0&&(document.body.innerHTML+=`<audio id='audio-player' preload='auto' src='/media/xylophone/${e}.wav'></audio>`);let t=document.getElementById("audio-player");t.volume=.4,t.play()}function expandText(){if("home"==currentMode&&!1==expandedText){expandedText=!0,translucentMode();let e=document.getElementById("desc");e.style.margin="27px 0 32px",e.innerHTML='At <a id="apollo" target="_blank" href="https://www.apollographql.com/studio/observe/" onmouseenter={tintBackgroundTo(\'160d38\')} onmouseleave={tintBackgroundTo(\'0c0c0d\')}>Apollo</a>, I build analytics tools that give developers new ways to understand and improve their GraphQL APIs. <br><br>I created <a id="room" href="http://www.room738.xyz/" onmouseenter={tintBackgroundTo(\'0d294d\')} onmouseleave={tintBackgroundTo(\'0c0c0d\')}>room738</a> to make free, open-source browser tools.',e.style.cursor="url('media/check-cursor.svg'), pointer",e.addEventListener("click",()=>{compressText()})}}function compressText(){if("home"==currentMode&&!0==expandedText){expandedText=!1,undoTranslucentMode();let e=document.getElementById("desc");e.style.margin="22px 0 27px",e.innerHTML=`I write code at <a id="apollo" target="_blank" href="https://www.apollographql.com/studio/observe/" onmouseenter={tintBackgroundTo('160d38')} onmouseleave={tintBackgroundTo('0c0c0d')}>Apollo</a><br> & make gizmos at <a id="room" href="http://www.room738.xyz/" onmouseenter={tintBackgroundTo('0d294d')} onmouseleave={tintBackgroundTo('0c0c0d')}>room738</a>`,e.style.cursor="url('media/question-cursor.svg'), help",e.addEventListener("click",()=>{expandText()})}}function showAbout(){"blog"==currentMode&&document.getElementById("pen").classList.remove("hidden"),"home"==currentMode&&(document.getElementById("desc").style.cursor="default"),currentMode="about";let e=document.getElementById("chevron");e.innerText="<",e.setAttribute("title","Back to Home"),e.style.cursor="pointer";document.getElementById("text").innerHTML=" ",window.setTimeout(function(){terminalText(aboutString)},2e3),translucentMode();let t=document.getElementById("desc");t.innerText="One day, Nikhi will capture the true essence of his being and inscribe it here for all to bear witness. \n\nUntil then, it's empty.",t.style.margin="30px 0px 0px 0px",document.getElementById("socials").style.padding="26px 0 0 0",document.getElementById("about").classList.add("hidden")}function showBlog(){"about"==currentMode&&document.getElementById("about").classList.remove("hidden"),"home"==currentMode&&expandedText&&(document.getElementById("desc").style.margin="22px 0 25px"),"home"==currentMode&&(document.getElementById("desc").style.cursor="default"),currentMode="blog";let e=document.getElementById("chevron");e.innerText="<",e.setAttribute("title","Back to Home"),e.style.cursor="pointer",document.getElementById("pen").classList.add("hidden");let t=document.getElementById("desc");t.innerHTML=" ",t.style.minWidth="276px";document.getElementById("text").innerHTML=" ",window.setTimeout(function(){terminalText(blogString)},2e3),t.innerHTML="<ul><li><a onmouseenter={showDate(0)} onmouseleave={hideDate(0)} id='blog-link' href=''><i>*crickets*</i></a><span class='blog-date'>12/22</span></li><li><a onmouseenter={showDate(1)} onmouseleave={hideDate(1)} id='blog-link' href=''><i>*more crickets*</i></a><span class='blog-date'>08/22</span></li><li><a onmouseenter={showDate(2)} onmouseleave={hideDate(2)} id='blog-link' href=''><i>*mooore crickets*</i></a><span class='blog-date'>08/20</span></li></ul>",translucentMode()}function showHome(){("about"==currentMode||"blog"==currentMode)&&(undoTranslucentMode(),document.getElementById("desc").addEventListener("click",()=>{expandText()})),currentMode="home",window.setTimeout(function(){terminalText(nameString)},2e3);document.getElementById("chevron").innerText=">",document.getElementById("main-copy").innerHTML=mainCopy,document.getElementById("socials").style.padding="0",document.getElementById("pen").classList.remove("hidden"),document.getElementById("about").classList.remove("hidden")}function main(){document.body.style.backgroundColor="#ffffff00",document.getElementById("left-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"}),document.getElementById("right-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"}),terminalText(helloWorld),window.setTimeout(function(){terminalText(nameString)},3e3),window.setTimeout(function(){window.setInterval(blinkingCursor,500)},5500),window.setTimeout(function(){document.getElementById("pen").addEventListener("click",()=>{showBlog()}),document.getElementById("about").addEventListener("click",()=>{showAbout()})},6e3),startBackgroundAnimation()}main();