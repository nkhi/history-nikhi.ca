"use strict";var terminal=document.getElementById("console"),letterCount=0,letterDelete=0,panelCount=0,visible=!0,expandedText=!1,newOpacity=0,helloWorld="hello world",nameString="Nikhi Bhambra",postsString="posts",aboutString="about",currentMode="home",seeBackgroundModeString="...whoa";let compressedText=`I write code at <a id="apollo" target="_blank" href="https://www.apollographql.com/studio/observe/" onmouseenter={tintBackgroundTo('2a0957')} onmouseleave={tintBackgroundTo('0c0c0d')}>Apollo</a>
<br> & make gizmos at <a id="room" href="http://www.room738.xyz/" onmouseenter={tintBackgroundTo('540946')} onmouseleave={tintBackgroundTo('0c0c0d')}>room738</a>`,aboutText="I've spent two years working remotely at start ups in Toronto, and I like building things on the web that make life easier. In the future, I want to design better AI that can understand like us.",postsListText=`<ul>
<li id="gqlparty">
  <div class="emoji-container">ðŸª©</div>
  <div id="text-story">
      <a target="_blank" class="posts-link" href="/posts/?gqlparty">A Middling Title
    </a>
  </div>
</li>
<li id="favs">
<div class="emoji-container">ðŸ¤–</div>
<div id="text-story">
<a class="posts-link" target="_blank" href="/posts/?ml">An Incredible Title</a>
</a>
</div>
</li>
<li id="favs">
<div class="emoji-container">ðŸ¤©</div>
<div id="text-story">
<a class="posts-link" target="_blank" href="/posts/?favs">The Best Title Ever</a>
</a>
</div>
</li>
</ul>`,detailedHomeText='At <a id="apollo" target="_blank" href="https://www.apollographql.com/studio/observe/" onmouseenter={tintBackgroundTo(\'2a0957\')} onmouseleave={tintBackgroundTo(\'0c0c0d\')}>Apollo</a> I build analytics tools that give developers new ways to understand and improve their GraphQL APIs. <br><br><a id="room" href="http://www.room738.xyz/" onmouseenter={tintBackgroundTo(\'540946\')} onmouseleave={tintBackgroundTo(\'0c0c0d\')}>room738</a> makes free, open source browser tools.';var desc=document.getElementById("desc");let mainCopy=document.getElementById("main-copy").innerHTML;function terminalText(e){let t=document.getElementById("text");window.setTimeout(function(){window.setTimeout(function(){if(0===letterCount)for(;letterCount<=e.length;)!function(n){window.setTimeout(function(){1===n&&(terminal.innerHTML="&#95;"),t.innerHTML=e.substring(0,n)},100*n)}(letterCount++)},0),window.setTimeout(function(){if(letterCount>=e.length&&e!=nameString)for(;letterCount>=0&&letterDelete!=e.length+1;)!function(n){window.setTimeout(function(){n<1&&(terminal.innerHTML="&nbsp;&#95;"),t.innerHTML=e.substring(0,n)},1e3-40*n)}(letterDelete++)},2e3),letterCount=0,letterDelete=0},1500)}function blinkingCursor(){visible?(terminal.className="console-underscore hidden",visible=!1):(terminal.className="console-underscore",visible=!0)}function tintBackgroundTo(e){document.documentElement.style.background="#"+e}function startBackgroundAnimation(){window.addEventListener("load",function(){let e,t,n,o,i,r,s,l,a,d,c,u,m,g=Math.random,$=Math.floor,h=Math.abs;function y(e,t){return void 0===t?e*g():e+g()*(t-e)}function p(e,t){return void 0===t?$(e*g()):e+$(g()*(t-e))}function f(e){let t,n;for(let o=e.length-1;o>=1;--o)t=p(0,o+1),n=e[o],e[o]=e[t],e[t]=n;return e}function x(e,t,r){this.color=r||`hsl(${p(360)},100%,50%)`,this.kx=e,this.ky=t,this.kxc=e-d,this.kyc=t-c,this.xc=n/2+this.kxc*i,this.yc=o/2+this.kyc*i}function v(e){let t=e.hue,n=e.dhue,o=e.lum,i=e.dlum,r=e.width,s=e.dWidth,l;switch(m){case 0:l=`hsl(${t},100%,50%)`,t=(t+n)%360;break;case 1:l=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-h(i)),o<40&&(i=h(i));break;case 2:l=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-h(i)),o<40&&(i=h(i)),t=(t+n)%360}return(r+=s)>2.5&&(s=-h(s)),r<.5&&(s=h(s)),{hue:t,dhue:n,lum:o,dlum:i,width:r,dWidth:s,color:l}}x.prototype.fillSquare=function(e){let n=i-.5,o=n/2;this.evolColor=e,t.fillStyle=`hsl(${e.hue}, 100%,${e.lum}% )`,t.fillRect(this.xc-o,this.yc-o,n,n)};let k;{let T=0,E,b,B;k=function(e){let t,n,o;(n=u.pop())&&"reset"==n.event&&(T=0),n&&"click"==n.event&&(T=0),window.requestAnimationFrame(k),t=performance.now();do switch(T){case 0:w()&&(++T,(B={}).hue=p(360),B.dhue=p(2)?1:359,B.lum=p(40,80),B.dlum=p(2)?-1:1,B.width=y(.5,2.5),B.dWidth=.1,B=v(B));break;case 1:E=[b=s[c][d]],++T;case 2:if(0==E.length){T+=10;break}if((b=E.shift()).evolColor)break;++T;case 3:if(B=v(B),b.group.forEach(e=>e.fillSquare(B)),o=new Set,b.group.forEach(e=>{e.neighbours.forEach(e=>{e.evolColor||o.add(e.group)})}),0==o.size){--T;break}o=f([...o]);for(let i=1;i<o.length;++i)E.push([...o[i]][0]);b=[...o[0]][0]}while((2==T||3==T)&&performance.now()-t<.01)}}function _(e,t,n){t<0||n<0||t>=l||n>=a||(e.add(s[n][t]),s[n][t].group=e)}function v(e){let t=e.hue,n=e.dhue,o=e.lum,i=e.dlum,r=e.width,s=e.dWidth,l;switch(m){case 0:l=`hsl(${t},100%,50%)`,t=(t+n)%360,o=50;break;case 1:l=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-h(i)),o<40&&(i=h(i));break;case 2:l=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-h(i)),o<40&&(i=h(i)),t=(t+n)%360}return(r+=s)>2.5&&(s=-h(s)),r<.5&&(s=h(s)),{hue:t,dhue:n,lum:o,dlum:i,width:r,dWidth:s,color:l}}function w(){return n=window.innerWidth,o=window.innerHeight,e.width=n,e.height=o,t.lineJoin="bevel",t.lineCap="round",r=(i=y(5,10))/2,c=$(o/i/2),l=1+2*(d=$(n/i/2)),a=1+2*c,!(l<3)&&!(a<3)&&(t.clearRect(0,0,n,o),m=p(3),function e(){let t,n,o;s=[];for(let i=0;i<a;++i){s[i]=[];for(let r=0;r<l;++r)s[i][r]=new x(r,i)}for(let u=0;u<a;++u)for(let m=0;m<l;++m)(o=s[u][m]).neighbours=[],(n=u-1)>=0&&(o.neighbours[0]=s[n][m]),(t=m+1)<l&&(o.neighbours[1]=s[u][t]),(n=u+1)<a&&(o.neighbours[2]=s[n][m]),(t=m-1)>=0&&(o.neighbours[3]=s[u][t]);for(let g=0;g<a;++g)for(let $=0;$<l;++$)(o=s[g][$]).group||(o.group=new Set([o]),_(o.group,d-o.kxc,o.ky),_(o.group,o.kx,c-o.kyc),_(o.group,d-o.kxc,c-o.kyc),_(o.group,d+o.kyc,c+o.kxc),_(o.group,d+o.kyc,c-o.kxc),_(o.group,d-o.kyc,c+o.kxc),_(o.group,d-o.kyc,c-o.kxc))}(),!0)}(e=document.createElement("canvas")).style.position="absolute",e.style.zIndex="-1",e.style.opacity=.2,e.style.transition="opacity 1s",document.documentElement.appendChild(e),t=e.getContext("2d"),e.setAttribute("title","you feel a strange urge to click the background..."),e.addEventListener("click",function e(t){u.push({event:"click"}),document.getElementsByTagName("canvas")[0].removeAttribute("title"),(panelCount+=1)<=9&&playPanelDingSoundEffect(panelCount)}),u=[{event:"reset"}],requestAnimationFrame(k)})}function playPanelDingSoundEffect(e){let t=document.getElementById("audio-player");if(e<=8){if(1==e)t.play();else{var n=["c","d","e","f","g","a","b","c2"][e-1];t.setAttribute("src",`media/xylophone/${n}.wav`),t.play()}}else document.getElementsByTagName("audio")[0].remove()}function stopBackgroundAnimation(){document.getElementsByTagName("canvas")[0].remove()}function seeBackground(){"home"!=currentMode||expandedText||(document.getElementsByTagName("canvas")[0].style.opacity=1,document.getElementById("top-part").classList.add("hidden"),document.getElementById("main-copy").classList.add("hidden"),document.getElementById("socials").classList.add("hidden"))}function undoSeeBackground(){document.getElementsByTagName("canvas")[0].style.opacity=.18,document.getElementById("top-part").classList.remove("hidden"),document.getElementById("main-copy").classList.remove("hidden"),document.getElementById("socials").classList.remove("hidden")}function translucentMode(){document.body.classList.add("transparent-surface")}function undoTranslucentMode(){document.body.classList.remove("transparent-surface")}function opacityMap(e){return .004*e}function turnOnNarration(){!document.body.getElementsByClassName("audio").length>0&&(document.body.innerHTML+="<audio id='audio-player' preload='auto' src='/media/about_narration.mp3'></audio>");document.getElementById("audio-player").play();let e=document.getElementById("button");e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-stop-circle'><circle cx='12' cy='12' r='10'></circle><rect x='10' y='10' width='4' height='4' fill='currentColor'></rect></svg>",e.removeEventListener("click",()=>{turnOnNarration()}),e.addEventListener("click",()=>{turnOffNarration()}),document.getElementById("options-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"})}function turnOffNarration(){let e=document.getElementById("button");document.getElementById("audio-player").pause(),e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-play-circle'><circle cx='12' cy='12' r='10'></circle><polygon points='10 8 16 12 10 16 10 8'></polygon></svg>",e.removeEventListener("click",()=>{turnOffNarration()}),e.addEventListener("click",()=>{turnOnNarration()}),document.getElementById("options-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"})}function changeBodySize(){}function makeNoteGrid(){}function showAbout(){"posts"==currentMode&&(document.getElementById("pen").classList.remove("hidden"),document.getElementById("pen").style.marginRight="0px",desc.style.minWidth="",desc.style.height=null),"home"==currentMode&&(document.getElementById("pen").style.marginRight="0px",desc.style.cursor="default",desc.removeAttribute("title")),expandedText&&(document.getElementById("content-container").style.marginLeft=null,desc.style.margin="22px 0 27px"),currentMode="about";let e=document.getElementById("chevron");e.innerText="<",e.setAttribute("title","Back to Home"),e.style.cursor="pointer";document.getElementById("text").innerHTML="â€…",window.setTimeout(function(){terminalText(aboutString)},2e3),translucentMode(),desc.style.minHeight="204px",desc.style.margin="20px 0 10px",desc.style.maxWidth="325px",desc.style.textAlign="justify",desc.innerHTML=aboutText,document.getElementById("socials").style.padding="16px 0 0 0",document.getElementById("about").classList.add("hidden")}function showPosts(){"about"==currentMode&&(document.getElementById("about").classList.remove("hidden"),desc.style.minHeight="",desc.style.maxWidth="",desc.style.textAlign=null,document.getElementById("pen").style.marginRight="14px"),"home"==currentMode&&expandedText&&(desc.style.margin="23px 0 26px"),"home"==currentMode&&(desc.style.cursor="default",desc.removeAttribute("title")),expandedText&&(document.getElementById("content-container").style.marginLeft=null,desc.removeAttribute("title"),desc.style.margin="22px 0 27px"),desc.style.minWidth="300px",desc.style.height="204px",desc.innerText="",currentMode="posts";let e=document.getElementById("chevron");e.innerText="<",e.setAttribute("title","Back to Home"),e.style.cursor="pointer",document.getElementById("pen").classList.add("hidden"),desc.innerHTML="â€…",desc.style.minWidth="325px";document.getElementById("text").innerHTML="â€…",window.setTimeout(function(){terminalText(postsString)},2e3),desc.innerHTML=postsListText,translucentMode()}function showHome(){("about"==currentMode||"posts"==currentMode)&&(undoTranslucentMode(),desc.style.maxWidth="",document.body.style.height="328px",document.getElementById("pen").style.marginRight="14px",desc.style.textAlign=null),expandedText&&compressText(),desc.addEventListener("click",()=>{showDetailedHome()}),currentMode="home",window.setTimeout(function(){terminalText(nameString)},2e3);document.getElementById("chevron").innerText=">",document.getElementById("main-copy").innerHTML=mainCopy,document.getElementById("socials").style.padding="0",document.getElementById("pen").classList.remove("hidden"),document.getElementById("about").classList.remove("hidden")}function showDetailedHome(){if("home"==currentMode&&!expandedText){expandedText=!0,translucentMode(),document.getElementById("right-container").style.paddingRight="2px",document.getElementById("main-copy").style.maxWidth="311px";document.getElementById("chevron").innerText="<",desc.title="Learn Less",desc.style.margin="27px 0 31.4px",desc.innerHTML=detailedHomeText,desc.style.cursor='url("media/check-cursor.svg"), pointer',document.getElementById("content-container").classList.add("flexbox-util"),desc.addEventListener("click",()=>{compressText()})}}function compressText(){"home"==currentMode&&expandedText&&(expandedText=!1,document.getElementById("right-container").style.paddingRight=null,document.getElementById("main-copy").style.maxWidth="340px",undoTranslucentMode(),desc.title="Learn More Again",desc.style.margin="22px 0 27px",desc.innerHTML=compressedText,desc.style.cursor="url('media/question-cursor.svg'), help",document.getElementById("content-container").style.marginLeft=null,document.getElementById("content-container").classList.remove("flexbox-util"),desc.addEventListener("click",()=>{showDetailedHome()}))}function main(){document.body.style.backgroundColor="#ffffff00",document.getElementById("left-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"}),document.getElementById("right-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"}),terminalText(helloWorld),window.setTimeout(function(){terminalText(nameString)},3e3),window.setTimeout(function(){window.setInterval(blinkingCursor,500)},5500),window.setTimeout(function(){document.getElementById("pen").addEventListener("click",()=>{showPosts()}),document.getElementById("about").addEventListener("click",()=>{showAbout()}),document.getElementById("top-part").addEventListener("mouseenter",()=>{seeBackground(),window.setTimeout(function(){undoSeeBackground()},2e4),window.setTimeout(function(){terminalText(seeBackgroundModeString)},20001),window.setTimeout(function(){seeBackgroundModeString.length<16&&(seeBackgroundModeString+="a")},20010),window.setTimeout(function(){terminalText(nameString)},24e3)})},6e3),startBackgroundAnimation()}main();