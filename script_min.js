"use strict";var desc=document.getElementById("desc");function tintBackgroundTo(e){document.documentElement.style.background="#"+e}function startBackgroundAnimation(){window.addEventListener("load",function(){let e,t,n,o,i,r,l,c,a,s,u,d,$,h=Math.random,g=Math.floor,f=Math.abs;function m(e,t){return void 0===t?e*h():e+h()*(t-e)}function y(e,t){return void 0===t?g(e*h()):e+g(h()*(t-e))}function k(e){let t,n;for(let o=e.length-1;o>=1;--o)t=y(0,o+1),n=e[o],e[o]=e[t],e[t]=n;return e}function p(e,t,r){this.color=r||`hsl(${y(360)},100%,50%)`,this.kx=e,this.ky=t,this.kxc=e-s,this.kyc=t-u,this.xc=n/2+this.kxc*i,this.yc=o/2+this.kyc*i}function _(e){let t=e.hue,n=e.dhue,o=e.lum,i=e.dlum,r=e.width,l=e.dWidth,c;switch($){case 0:c=`hsl(${t},100%,50%)`,t=(t+n)%360;break;case 1:c=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-f(i)),o<40&&(i=f(i));break;case 2:c=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-f(i)),o<40&&(i=f(i)),t=(t+n)%360}return(r+=l)>2.5&&(l=-f(l)),r<.5&&(l=f(l)),{hue:t,dhue:n,lum:o,dlum:i,width:r,dWidth:l,color:c}}p.prototype.fillSquare=function(e){let n=i-.5,o=n/2;this.evolColor=e,t.fillStyle=`hsl(${e.hue}, 100%,${e.lum}% )`,t.fillRect(this.xc-o,this.yc-o,n,n)};let v;{let E=0,b,w,x;v=function(e){let t,n,o;(n=d.pop())&&"reset"==n.event&&(E=0),n&&"click"==n.event&&(E=0),window.requestAnimationFrame(v),t=performance.now();do switch(E){case 0:L()&&(++E,(x={}).hue=y(360),x.dhue=y(2)?1:359,x.lum=y(40,80),x.dlum=y(2)?-1:1,x.width=m(.5,2.5),x.dWidth=.1,x=_(x));break;case 1:b=[w=l[u][s]],++E;case 2:if(0==b.length){E+=10;break}if((w=b.shift()).evolColor)break;++E;case 3:if(x=_(x),w.group.forEach(e=>e.fillSquare(x)),o=new Set,w.group.forEach(e=>{e.neighbours.forEach(e=>{e.evolColor||o.add(e.group)})}),0==o.size){--E;break}o=k([...o]);for(let i=1;i<o.length;++i)b.push([...o[i]][0]);w=[...o[0]][0]}while((2==E||3==E)&&performance.now()-t<.01)}}function B(e,t,n){t<0||n<0||t>=c||n>=a||(e.add(l[n][t]),l[n][t].group=e)}function _(e){let t=e.hue,n=e.dhue,o=e.lum,i=e.dlum,r=e.width,l=e.dWidth,c;switch($){case 0:c=`hsl(${t},100%,50%)`,t=(t+n)%360,o=50;break;case 1:c=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-f(i)),o<40&&(i=f(i));break;case 2:c=`hsl(${t},100%,${o}%)`,(o+=i)>80&&(i=-f(i)),o<40&&(i=f(i)),t=(t+n)%360}return(r+=l)>2.5&&(l=-f(l)),r<.5&&(l=f(l)),{hue:t,dhue:n,lum:o,dlum:i,width:r,dWidth:l,color:c}}function L(){return n=window.innerWidth,o=window.innerHeight,e.width=n,e.height=o,t.lineJoin="bevel",t.lineCap="round",r=(i=m(5,10))/2,u=g(o/i/2),c=1+2*(s=g(n/i/2)),a=1+2*u,!(c<3)&&!(a<3)&&(t.clearRect(0,0,n,o),$=y(3),function e(){let t,n,o;l=[];for(let i=0;i<a;++i){l[i]=[];for(let r=0;r<c;++r)l[i][r]=new p(r,i)}for(let d=0;d<a;++d)for(let $=0;$<c;++$)(o=l[d][$]).neighbours=[],(n=d-1)>=0&&(o.neighbours[0]=l[n][$]),(t=$+1)<c&&(o.neighbours[1]=l[d][t]),(n=d+1)<a&&(o.neighbours[2]=l[n][$]),(t=$-1)>=0&&(o.neighbours[3]=l[d][t]);for(let h=0;h<a;++h)for(let g=0;g<c;++g)(o=l[h][g]).group||(o.group=new Set([o]),B(o.group,s-o.kxc,o.ky),B(o.group,o.kx,u-o.kyc),B(o.group,s-o.kxc,u-o.kyc),B(o.group,s+o.kyc,u+o.kxc),B(o.group,s+o.kyc,u-o.kxc),B(o.group,s-o.kyc,u+o.kxc),B(o.group,s-o.kyc,u-o.kxc))}(),!0)}(e=document.createElement("canvas")).style.position="absolute",e.style.zIndex="-1",e.style.opacity=.25,e.style.transition="opacity 1s",document.documentElement.appendChild(e),t=e.getContext("2d"),e.setAttribute("title","you feel a strange urge to click the background..."),e.addEventListener("click",function e(t){d.push({event:"click"}),document.getElementsByTagName("canvas")[0].removeAttribute("title"),(panelCount+=1)<=9&&playPanelDingSoundEffect(panelCount)}),d=[{event:"reset"}],requestAnimationFrame(v)})}function playPanelDingSoundEffect(e){let t=document.getElementById("audio-player");if(e<=8){if(1==e)t.play();else{var n=["c","d","e","f","g","a","b","c2"][e-1];t.setAttribute("src",`media/xylophone/${n}.wav`),t.play()}}else document.getElementsByTagName("audio")[0].remove()}function stopBackgroundAnimation(){document.getElementsByTagName("canvas")[0].remove()}function turnOnNarration(){!document.body.getElementsByClassName("audio").length>0&&(document.body.innerHTML+="<audio id='audio-player' preload='auto' src='/media/about_narration.mp3'></audio>");document.getElementById("audio-player").play();let e=document.getElementById("button");e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-stop-circle'><circle cx='12' cy='12' r='10'></circle><rect x='10' y='10' width='4' height='4' fill='currentColor'></rect></svg>",e.removeEventListener("click",()=>{turnOnNarration()}),e.addEventListener("click",()=>{turnOffNarration()}),document.getElementById("options-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"})}function turnOffNarration(){let e=document.getElementById("button");document.getElementById("audio-player").pause(),e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-play-circle'><circle cx='12' cy='12' r='10'></circle><polygon points='10 8 16 12 10 16 10 8'></polygon></svg>",e.removeEventListener("click",()=>{turnOffNarration()}),e.addEventListener("click",()=>{turnOnNarration()}),document.getElementById("options-container").addEventListener("mouseleave",()=>{document.documentElement.style.background="#0c0c0d"})}function main(){document.body.style.backgroundColor="#ffffff00",startBackgroundAnimation(),window.setTimeout(function(){document.getElementById("top").classList.remove("hidden"),document.getElementById("writing").classList.remove("hidden"),document.getElementById("previously").classList.remove("hidden")},1800)}main();